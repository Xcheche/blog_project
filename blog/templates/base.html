{% load static %}
{% load pwa %}
{% progressive_web_app_meta %}
<!DOCTYPE html>
<html lang="en">
  {% load pwa %}
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <!--Boostrap js-->
    <!-- Bootstrap JS CDN -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
<!--Css-->
<link rel="stylesheet" href="{% static 'blog/main.css' %}">
<!--Htmx-->
<script src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>
<!--End Htmx-->


    <title>{% block title %}Cheche blog{% endblock %}</title>
    <!--for service worker Splash-->
    {% load static %}
    <link rel="icon" type="image/png" href="{% static 'images/favicon-96x96.png' %}" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="{% static 'images/favicon.svg' %}" />
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" />
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}" />
    <meta name="apple-mobile-web-app-title" content="Cheche" />
    <link rel="manifest" href="{% static 'site.webmanifest' %}" />


    

<!--Splash-->
   
  </head>
  <body>
 <!--Main-->
<!--Django Messages-->

<div class="w-50 mx-auto">
  {% if messages %}
      {% for message in messages %}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
      {% endfor %}
  {% endif %}
</div> 



<!--End of Django Messages-->
 <main role="main" class="container">
  <div class="row">
    {% include 'nav.html' %}
    <div class="col-md-8">
      {% block content %}{% endblock %}
    </div>
    <div class="col-md-4">
      <div class="content-section">
        <h3>Sidebar</h3>
     
          <ul class="list-group">
            
        <li class="list-group-item list-group-item-light">
    <a class="article-title" href="{%url 'latest' %}"> Latest Posts</a>
</li>

          </ul>
        </p>
      </div>
    </div>
  </div>
</main>
 <!--End main-->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <!--Splash screen for desktop -->
    <div id="splash" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:white;display:flex;justify-content:center;align-items:center;">
      <!-- <img src="{% static 'images/favicon-96x96.png' %}" alt="Loading..." width="80"> can use image -->


      <div style="display: flex; flex-direction: column; align-items: center;">
        <svg width="60" height="60" viewBox="0 0 50 50">
          <circle cx="25" cy="25" r="20" fill="#e9ecef"/>
          <circle cx="25" cy="25" r="20" fill="none" stroke="#888F92FF" stroke-width="4" stroke-linecap="round" stroke-dasharray="90 60">
            <animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="1s" repeatCount="indefinite"/>
          </circle>
        </svg>
        <div style="margin-top: 16px; font-size: 1.2rem; color: #8c9ca5; font-weight: 600; letter-spacing: 1px;"> <!--Twist color as desired--></div>
          Loading Cheche...
        </div>
      </div>
    </div>

    <!-- End Splash screen for desktop -->

<!--js for desktop splash-->    
    <script>
      // Show splash for at least 2 seconds, even if page loads fast
      window.addEventListener('load', function () {
      setTimeout(function () {
        document.getElementById('splash').style.display = 'none';
      }, 5000); // 2000ms = 2 seconds
      });
    </script>
<!--End js for desktop splash-->    





<!-- Registeration OPtional for service worker-->
<script>
  if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/serviceworker.js').then(registration => {
    console.log("Service Worker registered with scope:", registration.scope);

    // Listen for updates to the service worker
    registration.onupdatefound = () => {
      const newWorker = registration.installing;
      newWorker.onstatechange = () => {
        if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
          // New update available
          if (confirm('New version available! Refresh to update?')) {
            window.location.reload();
          }
        }
      };
    };
  }).catch(error => {
    console.error("Service Worker registration failed:", error);
  });
}
</script>

<!--End of Registeration OPtional for service worker-->



  </body>
</html>
